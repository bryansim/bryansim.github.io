<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Bryan Sim (skytrax)</title><link>https://bryansim.github.io/</link><description></description><atom:link href="https://bryansim.github.io/categories/skytrax.xml" type="application/rss+xml" rel="self"></atom:link><language>en</language><lastBuildDate>Mon, 16 May 2016 22:39:09 GMT</lastBuildDate><generator>https://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Skytrax Data #3: The OLS Model</title><link>https://bryansim.github.io/posts/skytrax-data-3-the-ols-model/</link><dc:creator>Bryan Sim</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Skytrax-Data-#3:-The-OLS-Model"&gt;Skytrax Data #3: The OLS Model&lt;a class="anchor-link" href="https://bryansim.github.io/posts/skytrax-data-3-the-ols-model/#Skytrax-Data-#3:-The-OLS-Model"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;In this post, we're going to examine one way someone might evaluate which rating is the "most important" one in predicting participants' overall ratings: By examining coefficients in a multiple regression. Recall that besides passengers' overall ratings, there were 7 other criteria: their ratings of the flight's seat comfort, cabin staff, food and beverage, inflight entertainment, ground service, wifi connectivity, and value for money.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [1]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;psycopg2&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sqlalchemy&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;create_engine&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;statsmodels.api&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;sm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#This connects to the postgres database above.&lt;/span&gt;
&lt;span class="n"&gt;connection&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;psycopg2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"dbname = skytrax user=skytraxadmin password=skytraxadmin"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'SELECT * from airline;'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [4]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;descriptions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;descriptions&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [5]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[5]:&lt;/div&gt;


&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;airline_name                     41396
link                             41396
title                            41396
author                           41396
author_country                   39805
date                             41396
content                          41396
aircraft                          1278
type_traveller                    2378
cabin_flown                      38520
route                             2341
overall_rating                   36861
seat_comfort_rating              33706
cabin_staff_rating               33708
food_beverages_rating            33264
inflight_entertainment_rating    31114
ground_service_rating             2203
wifi_connectivity_rating           565
value_money_rating               39723
recommended                      41396
dtype: int64&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;In our subsequent analysis, we're going to ignore ground service ratings as well as wifi connectivity rating because, as you can see, these have very limited data.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [6]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pandas.stats.api&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;ols&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;olspd&lt;/span&gt;

&lt;span class="n"&gt;olspd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'overall_rating'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;'seat_comfort_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'cabin_staff_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;\
                                           &lt;span class="s1"&gt;'food_beverages_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'inflight_entertainment_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;\
                                           &lt;span class="s1"&gt;'value_money_rating'&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_stream output_stderr output_text"&gt;
&lt;pre&gt;C:\Users\dfthd\Anaconda3\envs\python2\lib\site-packages\IPython\core\interactiveshell.py:2885: FutureWarning: The pandas.stats.ols module is deprecated and will be removed in a future version. We refer to external packages like statsmodels, see some examples here: http://statsmodels.sourceforge.net/stable/regression.html
  exec(code_obj, self.user_global_ns, self.user_ns)
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[6]:&lt;/div&gt;


&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;
-------------------------Summary of Regression Analysis-------------------------

Formula: Y ~ &amp;lt;seat_comfort_rating&amp;gt; + &amp;lt;cabin_staff_rating&amp;gt;
             + &amp;lt;food_beverages_rating&amp;gt; + &amp;lt;inflight_entertainment_rating&amp;gt; + &amp;lt;value_money_rating&amp;gt;
             + &amp;lt;intercept&amp;gt;

Number of Observations:         28341
Number of Degrees of Freedom:   6

R-squared:         0.7887
Adj R-squared:     0.7887

Rmse:              1.4956

F-stat (5, 28335): 21157.9768, p-value:     0.0000

Degrees of Freedom: model 5, resid 28335

-----------------------Summary of Estimated Coefficients------------------------
      Variable       Coef    Std Err     t-stat    p-value    CI 2.5%   CI 97.5%
--------------------------------------------------------------------------------
seat_comfort_rating     0.4255     0.0097      43.89     0.0000     0.4065     0.4445
cabin_staff_rating     0.6621     0.0094      70.60     0.0000     0.6437     0.6805
food_beverages_rating     0.1660     0.0085      19.63     0.0000     0.1494     0.1826
inflight_entertainment_rating     0.0317     0.0062       5.09     0.0000     0.0195     0.0439
value_money_rating     0.9759     0.0103      94.89     0.0000     0.9557     0.9960
--------------------------------------------------------------------------------
     intercept    -1.5582     0.0254     -61.42     0.0000    -1.6079    -1.5085
---------------------------------End of Summary---------------------------------&lt;/pre&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;First, this tells us that the model with these 5 predictors predicts about 79% of the variance in participants' overall ratings. In addition, the F-test tells us that this percentage is statistically significant, although it has to be said that with such a large sample (n = 28341), this test was probably always going to be significant.&lt;/p&gt;
&lt;p&gt;Second, each of the coefficients tell us the change in Y (overall_ratings) for each unit change in that predictor. For example, for each unit change in passengers' seat comfort ratings, passengers overall ratings increased by .43 points.&lt;/p&gt;
&lt;p&gt;In the case of passengers' seat comfort ratings, this relationship is statistically significant. In fact, in this analysis, all the predictors are significantly related to passengers' overall ratings.&lt;/p&gt;
&lt;p&gt;However, it should be said that statistical significance and practical significance are not the same. From the coefficients, for example, each unit change in passengers' inflight entertainment ratings only increased their overall rating by 0.03, but each unit change in passengers' value for money ratings increased their overall ratings by .98 points.&lt;/p&gt;
&lt;p&gt;That said, the coefficients in this analysis are &lt;em&gt;conditional&lt;/em&gt; in that they are adjusted for one another. In other words, these coefficients represent what we know about the relationship between passenger ratings of each of the criteria &lt;em&gt;given our knowledge of how they rated the other elements&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Trying to isolate the impact of a single predictor is not as simple as running 5 separate regression models, because the predictors are correlated. We can illustrate this as follows:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [7]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;statsmodels.api&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;sm&lt;/span&gt;

&lt;span class="n"&gt;predictors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'seat_comfort_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'cabin_staff_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'food_beverages_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'inflight_entertainment_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;\
                &lt;span class="s1"&gt;'value_money_rating'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;cleaned_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s1"&gt;'overall_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'seat_comfort_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'cabin_staff_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'food_beverages_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'inflight_entertainment_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;\
                &lt;span class="s1"&gt;'value_money_rating'&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;

&lt;span class="n"&gt;cleaned_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dropna&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;predictor&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;#x = sm.add_constant(cleaned_data[predictor])&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OLS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;predictor&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'overall_rating'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;results&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'{0} coefficient: {1}'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictor&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;results&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'{0} rsquared: {1}'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictor&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;results&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rsquared&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;seat_comfort_rating coefficient: 0.485086064206
seat_comfort_rating rsquared: 0.892254153535
cabin_staff_rating coefficient: 0.53019002014
cabin_staff_rating rsquared: 0.911693773785
food_beverages_rating coefficient: 0.452602436575
food_beverages_rating rsquared: 0.852452501199
inflight_entertainment_rating coefficient: 0.374759040658
inflight_entertainment_rating rsquared: 0.710378283952
value_money_rating coefficient: 0.52075902098
value_money_rating rsquared: 0.931569962502
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;As you can see, the five separate OLS models give us five R&lt;sup&gt;2&lt;/sup&gt; values that do not add up to 100% of variance explained. This is because the five predictors are correlated. In a future post, we will use Shapley Value Regression to try and tease them apart.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><category>skytrax</category><guid>https://bryansim.github.io/posts/skytrax-data-3-the-ols-model/</guid><pubDate>Mon, 16 May 2016 22:38:29 GMT</pubDate></item><item><title>Skytrax Data #2: Shapley Value Regression</title><link>https://bryansim.github.io/posts/skytrax-data-2-shapley-value-regression/</link><dc:creator>Bryan Sim</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Shapley-Value-Regression"&gt;Shapley Value Regression&lt;a class="anchor-link" href="https://bryansim.github.io/posts/skytrax-data-2-shapley-value-regression/#Shapley-Value-Regression"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;When we have many variables predicting an outcome, how do we know which is the most "important"? In a multiple regression context, one might think, intuitively, that if you threw all the predictors into the same model, the one with the largest coefficient woud be the most important predictor.&lt;/p&gt;
&lt;p&gt;If all the predictors were perfectly orthogonal (i.e., completely uncorrelated), this would be true, as the coefficients would not change as a function of which predictors were included/excluded in the model.&lt;/p&gt;
&lt;p&gt;However, in most applications (perhaps even the vast majority of real-world cases), predictors are correlated with one another. This results in overlap in the variance that each predictor explains, and confounds simple interpretation of coefficients and R&lt;sup&gt;2&lt;/sup&gt; statistics &lt;em&gt;with regard to&lt;/em&gt; judging how important one predictor is over another. One consequence of predictors being correlated, for example, is that the order in which predictors are entered into the model affects the degree to which they increase R&lt;sup&gt;2&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;One solution to this problem is, when dealing with multiple predictors, to iterate over all possible orderings of the predictors, and obtain the &lt;em&gt;average&lt;/em&gt; importance of each predictor. This procedure is known as Shapley value regression, and is detailed &lt;a href="http://www.r-bloggers.com/the-relative-importance-of-predictors-let-the-games-begin/"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The R package relaimpo does this, but I wanted to work out an analog in Python.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="sd"&gt;'''&lt;/span&gt;
&lt;span class="sd"&gt;    This creates an instance of the class OLS with attributes coefficients, fitted_values, residuals, and rsquared &lt;/span&gt;
&lt;span class="sd"&gt;    '''&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;outcome&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c1"&gt;#We do the following so we can call them as attributes&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;outcome&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;outcome&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;]}&lt;/span&gt;
        &lt;span class="c1"&gt;#Create some dictionaries with all the predictors as keys, and empty lists as values&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resultsrsquared&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:[]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; 
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resultscoefficients&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:[]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;results&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:[]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="c1"&gt;#The above is preferred over dict.fromkeys(list,default) as the default value is shared among all keys, so appending an object&lt;/span&gt;
        &lt;span class="c1"&gt;#will append it to all keys.&lt;/span&gt;
        &lt;span class="c1"&gt;#See: http://stackoverflow.com/questions/23397153/append-value-to-one-list-in-dictionary-appends-value-to-all-lists-in-dictionary&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iterate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;outcome&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    
    &lt;span class="sd"&gt;'''&lt;/span&gt;
&lt;span class="sd"&gt;    The method below returns the coefficients from a least-squares regression.&lt;/span&gt;
&lt;span class="sd"&gt;    '''&lt;/span&gt;    
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;ols&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="c1"&gt;#Y is an nx1 vector, X is an nxp matrix&lt;/span&gt;
        &lt;span class="n"&gt;X_transpose&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transpose&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;X_transpose_X&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_transpose&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;X_inverse&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linalg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;inv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_transpose_X&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;X_transpose_Y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_transpose&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
               
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;coefficients&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X_inverse&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;X_transpose_Y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;intercept&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;coefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;coefficientslist&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;coefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:])&lt;/span&gt; &lt;span class="c1"&gt;#Change type to list&lt;/span&gt;
        
        &lt;span class="sd"&gt;'''&lt;/span&gt;
&lt;span class="sd"&gt;        The lines below are for calculating R^2.&lt;/span&gt;
&lt;span class="sd"&gt;        '''&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fitted_values&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;coefficients&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;residuals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Y&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fitted_values&lt;/span&gt;        
        
        &lt;span class="c1"&gt;#SStotal&lt;/span&gt;
        &lt;span class="n"&gt;yty&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transpose&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ones&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
        &lt;span class="n"&gt;ytj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transpose&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ytj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ytj&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;sst&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;yty&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;ytj&lt;/span&gt;
        &lt;span class="c1"&gt;#SSerror&lt;/span&gt;
        &lt;span class="n"&gt;sse&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transpose&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;residuals&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;residuals&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;#SSregression&lt;/span&gt;
        &lt;span class="n"&gt;ssr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sst&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;sse&lt;/span&gt;
        &lt;span class="c1"&gt;#rsquared&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rsquared&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ssr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sst&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;coefficientslist&lt;/span&gt;
        
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;iterate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;outcome&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c1"&gt;#Create dataset where we remove missing values listwise&lt;/span&gt;
        &lt;span class="c1"&gt;#SOMETHING IS WRONG WITH HOW YOU ARE SELECTING COLUMNS&lt;/span&gt;
        &lt;span class="n"&gt;Y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'{0}'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;outcome&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
        
        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Total cases: {0}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        
        &lt;span class="n"&gt;all_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;column_stack&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ones&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;bs&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;all_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;column_stack&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;all_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;bs&lt;/span&gt;&lt;span class="p"&gt;])))&lt;/span&gt;
        &lt;span class="n"&gt;all_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;all_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isnan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;all_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;any&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
        &lt;span class="n"&gt;Y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;all_data&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;all_data&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;X&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;all_data&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;
        
        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Cases after listwise deletion: {0}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;   
        
        &lt;span class="sd"&gt;'''&lt;/span&gt;
&lt;span class="sd"&gt;        Iterate through all predictors and return the average coefficient for all combinations of predictors&lt;/span&gt;
&lt;span class="sd"&gt;        '''&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;predictor&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt; &lt;span class="c1"&gt;#for each predictor, let's find the average for 1 to n predictors&lt;/span&gt;
        
            &lt;span class="n"&gt;otherpredictors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;oth&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;oth&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;oth&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;predictor&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;#list of other predictors&lt;/span&gt;
            &lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:[]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)}&lt;/span&gt; &lt;span class="c1"&gt;# +1 to reflect 1 to n predictors rather than 0 to n-1&lt;/span&gt;
            &lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:[]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)}&lt;/span&gt;
            
            &lt;span class="n"&gt;Xpredictor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;column_stack&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="n"&gt;predictor&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;

            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;npred&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt; &lt;span class="c1"&gt;#from 1 to n-1 other predictors&lt;/span&gt;
                &lt;span class="n"&gt;ordering&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;itertools&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;otherpredictors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;npred&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;comb&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;ordering&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="c1"&gt;#do ols for y and our subset of X&lt;/span&gt;
                    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comb&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;npred&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ols&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Xpredictor&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; 
                        &lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;npred&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rsquared&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="n"&gt;Xsub&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comb&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="c1"&gt;#the other predictors are in this matrix&lt;/span&gt;
                        &lt;span class="n"&gt;Xsub&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;column_stack&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;Xpredictor&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Xsub&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="c1"&gt;#combine them&lt;/span&gt;
                        &lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;npred&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ols&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Xsub&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; 
                        &lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;npred&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rsquared&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            
            &lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="c1"&gt;#because the model with all predictors always has the same R squared&lt;/span&gt;
            
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iteritems&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
                &lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resultscoefficients&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;predictor&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dictionaryofcoefficients&lt;/span&gt;
            
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iteritems&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;reverse&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;    
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt; 
                    &lt;span class="c1"&gt;#- (sum(dictionaryofrsquared[k-1])/len(dictionaryofrsquared[k-1]))&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resultsrsquared&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;predictors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;predictor&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dictionaryofrsquared&lt;/span&gt;
            
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resultsrsquared&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iteritems&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;results&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
             
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;As far as I can tell, this code does about 80% of what I want it to. It returns a list of what the average coefficient for each predictor is as a function of how many other predictors are in the model, and also returns the average R&lt;sup&gt;2&lt;/sup&gt; of the model with N predictors in it. There's still more to do though:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The code runs extremely slow, probably because of the weird nested for-loops I have in there.&lt;/li&gt;
&lt;li&gt;The method doesn't actually return the relative importance of each predictor. This has to do with the average change in R&lt;sup&gt;2&lt;/sup&gt; that each predictor contributes when added to the model. Right now, it just returns the R&lt;sup&gt;2&lt;/sup&gt; of the whole model.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I'll be working on this in the coming days, but for now, as an example for what does (and does not) work, let's run this on the Skytrax data, and see what happens:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;psycopg2&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [6]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#get data from postgres database&lt;/span&gt;
&lt;span class="n"&gt;connection&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;psycopg2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"dbname = skytrax user=skytraxadmin password=skytraxadmin"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"SELECT * from airline"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;testdata&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;column_names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;testdata&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;testdata&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;testdata&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;column_names&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [8]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;Shapley&lt;/span&gt;
&lt;span class="nb"&gt;reload&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Shapley&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;fit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Shapley&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;testdata&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"overall_rating"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'cabin_staff_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'seat_comfort_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'food_beverages_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; \
                                                    &lt;span class="s1"&gt;'inflight_entertainment_rating'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'value_money_rating'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;Average coefficients with N other predictors in the model:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resultscoefficients&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;Average Rsquared with N other predictors in the model:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resultsrsquared&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;This crap took {0}s to run"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;Total cases: 41396
Cases after listwise deletion: 28341

Average coefficients with N other predictors in the model:

{'value_money_rating': {1: 1.8649063450094783, 2: 1.5144640753771565, 3: 1.2811039278852754, 4: 1.1094616213211062, 5: 0.97588253839017369}, 'cabin_staff_rating': {1: 1.7220375706163686, 2: 1.2423932090274965, 3: 0.96482096920203941, 4: 0.78336800727344302, 5: 0.66212106011664673}, 'food_beverages_rating': {1: 1.3824000680960342, 2: 0.74574656752576396, 3: 0.41993379259250335, 4: 0.25813695445838092, 5: 0.16598034625130431}, 'seat_comfort_rating': {1: 1.7279134729889485, 2: 1.103370681632768, 3: 0.76087228190797218, 4: 0.55735092810755438, 5: 0.42553696755928527}, 'inflight_entertainment_rating': {1: 0.81813312432369223, 2: 0.25077293584225169, 3: 0.10988060366414072, 4: 0.055685681377817153, 5: 0.031685430819348603}}

Average Rsquared with N other predictors in the model:

{'value_money_rating': {1: 0.70000482291020016, 2: 0.73437848675413542, 3: 0.75769834885876719, 4: 0.77509515934098283}, 'cabin_staff_rating': {1: 0.61108838008392297, 2: 0.68880734158425838, 3: 0.73593199899832795, 4: 0.76760232624119729}, 'food_beverages_rating': {1: 0.41976593597077677, 2: 0.60519081823348375, 3: 0.70695963415469354, 4: 0.7590299721429592}, 'seat_comfort_rating': {1: 0.52806397291997464, 2: 0.64985921373852684, 3: 0.71984029509356728, 4: 0.76190216873812322}, 'inflight_entertainment_rating': {1: 0.1814590593325032, 2: 0.5789830526105908, 3: 0.70255932748876526, 4: 0.75836033918843182}}

This crap took 255.414000034s to run
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><category>skytrax</category><guid>https://bryansim.github.io/posts/skytrax-data-2-shapley-value-regression/</guid><pubDate>Thu, 05 May 2016 23:51:29 GMT</pubDate></item><item><title>Skytrax Data #1</title><link>https://bryansim.github.io/posts/skytrax-data-1/</link><dc:creator>Bryan Sim</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [10]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;matplotlib&lt;/span&gt; inline
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Skytrax-ratings"&gt;Skytrax ratings&lt;a class="anchor-link" href="https://bryansim.github.io/posts/skytrax-data-1/#Skytrax-ratings"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Following up on this (&lt;a href="http://www.quangn.com/exploring-reviews-of-airline-services/"&gt;http://www.quangn.com/exploring-reviews-of-airline-services/&lt;/a&gt;) investigation into Skytrax ratings, which are a collection of ratings by made by airline passengers, I wanted to answer some interesting questions I had of my own.&lt;/p&gt;
&lt;p&gt;Specifically, what I was interested in is the relative contribution of each of the different metrics (e.g., ground staff, seat comfort, value) to (a) a passenger's overall rating of the airline, and (b) their decision to recommend the airline to another person. Consequently, which criteria should airlines focus on to improve customers' overall perceptions of them (the equivalent of model lift in logit regression)?&lt;/p&gt;
&lt;p&gt;Along the way, I thought I'd sate my own curiousity about the following:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;How do passenger ratings differ between types of aircraft?&lt;/li&gt;
&lt;li&gt;How do passenger ratings differ by cabin class?&lt;/li&gt;
&lt;li&gt;How do passenger artings differ depending on where &lt;em&gt;they&lt;/em&gt; come from?&lt;/li&gt;
&lt;li&gt;How have ratings changed over time?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;But first, let's import the data:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [1]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;psycopg2&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sqlalchemy&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;create_engine&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;I first loaded the data (obtained from &lt;a href="https://github.com/quankiquanki/skytrax-reviews-dataset"&gt;https://github.com/quankiquanki/skytrax-reviews-dataset&lt;/a&gt;) into a postgres database. Pandas has a very helpful .to_sql() method that makes this easy:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#This snippet of code loads all the .csv files into a postgres database that I'd set up.&lt;/span&gt;
&lt;span class="n"&gt;engine&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;create_engine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"postgres://skytraxadmin:skytraxadmin@localhost/skytrax"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;databases&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'airline'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'airport'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'seat'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'lounge'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;#csv files&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;databases&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"{0}.csv"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_sql&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;engine&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#This connects to the postgres database above.&lt;/span&gt;
&lt;span class="n"&gt;connection&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;psycopg2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"dbname = skytrax user=skytraxadmin password=skytraxadmin"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Ratings-by-airline"&gt;Ratings by airline&lt;a class="anchor-link" href="https://bryansim.github.io/posts/skytrax-data-1/#Ratings-by-airline"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The first thing I was interested in doing was a sanity check to just make sure that I was looking at the same data that the original blog post analyzed (&lt;a href="http://www.quangn.com/exploring-reviews-of-airline-services/"&gt;http://www.quangn.com/exploring-reviews-of-airline-services/&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;This was the case, although it appears that the original author of that post took only airlines where there were more than 100 ratings, which is what I happened to do.&lt;/p&gt;
&lt;p&gt;First, we select the average rating of each airline, as long as that airline has more than 100 ratings. 100 is arbitrary, but if an airline has only a few ratings, the average rating is likely to be extremely variable across samples:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [4]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"SELECT airline_name, count(airline_name), avg(overall_rating) FROM airline &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;               GROUP BY airline_name HAVING count(airline_name) &amp;gt; 100 ORDER BY avg(overall_rating) desc;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [5]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;airline_name_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;column_names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;#column names are stored in the .description attribute&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [8]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;airline_name_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;airline_name_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;airline_name_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;column_names&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Next, we use matplotlib to plot a simple chart of the top 10 rated airlines:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [13]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;top_ten_airlines&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;airline_name_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'airline_name'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'avg'&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="n"&gt;figure&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;bar_x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;top_ten_airlines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'avg'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;align&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'center'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;top_ten_airlines&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'airline_name'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;rotation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'vertical'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;xlabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Airline Name'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ylabel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Rating out of 10'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fontsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;top_ten_airlines&lt;/span&gt; &lt;span class="c1"&gt;#the bar graph does look a little pointless when you can just print out a list of the top 10 airlines.&lt;/span&gt;
&lt;span class="c1"&gt;#but whatever.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;         airline_name       avg
0     asiana-airlines  8.348837
1    garuda-indonesia  8.307692
2          air-astana  8.281553
3     bangkok-airways  8.122066
4     indigo-airlines  8.076923
5          korean-air  8.034921
6             eva-air  7.976351
7     aegean-airlines  7.823789
8  singapore-airlines  7.773148
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_area"&gt;&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_png output_subarea "&gt;
&lt;img src="data:image/png;base64,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"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Ratings-by-aircraft-type"&gt;Ratings by aircraft type&lt;a class="anchor-link" href="https://bryansim.github.io/posts/skytrax-data-1/#Ratings-by-aircraft-type"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The next thing I wanted to do was to see if ratings differed as a function of what aircraft the passenger took.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [27]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"SELECT aircraft, count(aircraft), avg(overall_rating) AS ovr, &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;avg(seat_comfort_rating) AS cmft, avg(inflight_entertainment_rating) AS inft FROM airline &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;WHERE aircraft != 'None' GROUP BY aircraft HAVING count(aircraft) &amp;gt;25 ORDER BY avg(overall_rating) asc;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [28]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;aircraft_type_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;column_names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;aircraft_type_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aircraft_type_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;aircraft_type_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;column_names&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [29]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;aircraft_type_data&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[29]:&lt;/div&gt;

&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;aircraft&lt;/th&gt;
      &lt;th&gt;count&lt;/th&gt;
      &lt;th&gt;ovr&lt;/th&gt;
      &lt;th&gt;cmft&lt;/th&gt;
      &lt;th&gt;inft&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;Boeing 737&lt;/td&gt;
      &lt;td&gt;47&lt;/td&gt;
      &lt;td&gt;5.553191&lt;/td&gt;
      &lt;td&gt;2.829787&lt;/td&gt;
      &lt;td&gt;2.888889&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;Boeing 747-400&lt;/td&gt;
      &lt;td&gt;26&lt;/td&gt;
      &lt;td&gt;5.615385&lt;/td&gt;
      &lt;td&gt;3.153846&lt;/td&gt;
      &lt;td&gt;2.720000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;Boeing 777&lt;/td&gt;
      &lt;td&gt;48&lt;/td&gt;
      &lt;td&gt;5.625000&lt;/td&gt;
      &lt;td&gt;3.354167&lt;/td&gt;
      &lt;td&gt;3.191489&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;A320&lt;/td&gt;
      &lt;td&gt;132&lt;/td&gt;
      &lt;td&gt;5.636364&lt;/td&gt;
      &lt;td&gt;2.856061&lt;/td&gt;
      &lt;td&gt;2.333333&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;A330&lt;/td&gt;
      &lt;td&gt;74&lt;/td&gt;
      &lt;td&gt;6.189189&lt;/td&gt;
      &lt;td&gt;3.243243&lt;/td&gt;
      &lt;td&gt;3.101449&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt;Boeing 787&lt;/td&gt;
      &lt;td&gt;43&lt;/td&gt;
      &lt;td&gt;6.255814&lt;/td&gt;
      &lt;td&gt;3.558140&lt;/td&gt;
      &lt;td&gt;3.275000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6&lt;/th&gt;
      &lt;td&gt;A319&lt;/td&gt;
      &lt;td&gt;26&lt;/td&gt;
      &lt;td&gt;6.307692&lt;/td&gt;
      &lt;td&gt;3.115385&lt;/td&gt;
      &lt;td&gt;2.727273&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;7&lt;/th&gt;
      &lt;td&gt;A321&lt;/td&gt;
      &lt;td&gt;45&lt;/td&gt;
      &lt;td&gt;6.444444&lt;/td&gt;
      &lt;td&gt;3.444444&lt;/td&gt;
      &lt;td&gt;2.416667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;8&lt;/th&gt;
      &lt;td&gt;A380&lt;/td&gt;
      &lt;td&gt;52&lt;/td&gt;
      &lt;td&gt;7.000000&lt;/td&gt;
      &lt;td&gt;3.788462&lt;/td&gt;
      &lt;td&gt;4.115385&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;9&lt;/th&gt;
      &lt;td&gt;Boeing 737-800&lt;/td&gt;
      &lt;td&gt;61&lt;/td&gt;
      &lt;td&gt;7.278689&lt;/td&gt;
      &lt;td&gt;3.622951&lt;/td&gt;
      &lt;td&gt;3.257143&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;10&lt;/th&gt;
      &lt;td&gt;Boeing 777-300ER&lt;/td&gt;
      &lt;td&gt;29&lt;/td&gt;
      &lt;td&gt;7.517241&lt;/td&gt;
      &lt;td&gt;4.103448&lt;/td&gt;
      &lt;td&gt;3.892857&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;11&lt;/th&gt;
      &lt;td&gt;A330-300&lt;/td&gt;
      &lt;td&gt;28&lt;/td&gt;
      &lt;td&gt;8.250000&lt;/td&gt;
      &lt;td&gt;4.000000&lt;/td&gt;
      &lt;td&gt;4.000000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;From the above there are only 11 aircraft types that have more than 25 ratings. A couple of aircraft have multiple listings. These appear to be the updated versions of the same aircraft (737-800 vs. 737 and A330-300 vs A330; I assume the generic types are the older models).&lt;/p&gt;
&lt;p&gt;There can be many reasons for this, of course. Newer aircraft tend to be more comfortable and reliable. Furthermore, an airline that runs older aircraft may also be associated with other negative experiences that arise because they're struggling. Alternatively, older aircraft may also be associated with "value" airlines, in which case, if customer expectations are commensurately low, these older aircraft may actually be rated more positively. That seems like a future question worth investigaing.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Boeing-vs.-Airbus"&gt;Boeing vs. Airbus&lt;a class="anchor-link" href="https://bryansim.github.io/posts/skytrax-data-1/#Boeing-vs.-Airbus"&gt;¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Just for fun, let's compare the average ratings of Boeing vs. Airbus aircraft. We can use regex to select the different rows:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [30]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;airbus_aircraft&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;aircraft_type_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;aircraft_type_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'aircraft'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contains&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r'A.*'&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="n"&gt;boeing_aircraft&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;aircraft_type_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;aircraft_type_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'aircraft'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contains&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r'Boeing.*'&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;airbus_aircraft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;boeing_aircraft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_stream output_stdout output_text"&gt;
&lt;pre&gt;count    59.500000
ovr       6.637948
cmft      3.407932
inft      3.115684
dtype: float64
count    42.333333
ovr       6.307553
cmft      3.437056
inft      3.204230
dtype: float64
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Interestingly, even though Boeing aircraft have comparable (or even slightly higher) ratings on "comfort" and "inflight entertainment", Airbus aircraft have higher overall ratings.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h2 id="Ratings-by-cabin-type"&gt;Ratings by cabin type&lt;a class="anchor-link" href="https://bryansim.github.io/posts/skytrax-data-1/#Ratings-by-cabin-type"&gt;¶&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Finally, let's take a look at whether the flying experience is different for the top 1% than it is for the rest of us. As an aside, if you go on Youtube and listen to air traffic controller recordings at JFK, the ATC uses "Top 1%" as a colloquialism for private jets. We go through the same process to import the data:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [31]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"SELECT avg(overall_rating) AS ovr, avg(seat_comfort_rating) AS seat, avg(cabin_staff_rating) AS cstaff,&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;avg(food_beverages_rating) AS food, avg(inflight_entertainment_rating) AS inflight, avg(ground_service_rating) AS gstaff,&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;avg(wifi_connectivity_rating) AS wifi, avg(value_money_rating) AS value, cabin_flown, count(*)&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;FROM airline GROUP BY cabin_flown;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [32]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;column_names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [33]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;column_names&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [41]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'ovr'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'ovr'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="c1"&gt;#rescaling the overall rating (out of 10) to be out of 5&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [40]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[40]:&lt;/div&gt;

&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;ovr&lt;/th&gt;
      &lt;th&gt;seat&lt;/th&gt;
      &lt;th&gt;cstaff&lt;/th&gt;
      &lt;th&gt;food&lt;/th&gt;
      &lt;th&gt;inflight&lt;/th&gt;
      &lt;th&gt;gstaff&lt;/th&gt;
      &lt;th&gt;wifi&lt;/th&gt;
      &lt;th&gt;value&lt;/th&gt;
      &lt;th&gt;cabin_flown&lt;/th&gt;
      &lt;th&gt;count&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;2.111056&lt;/td&gt;
      &lt;td&gt;2.371125&lt;/td&gt;
      &lt;td&gt;2.600531&lt;/td&gt;
      &lt;td&gt;1.936776&lt;/td&gt;
      &lt;td&gt;1.578055&lt;/td&gt;
      &lt;td&gt;2.750000&lt;/td&gt;
      &lt;td&gt;2.000000&lt;/td&gt;
      &lt;td&gt;2.664648&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;2876&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;2.928374&lt;/td&gt;
      &lt;td&gt;3.150485&lt;/td&gt;
      &lt;td&gt;3.406380&lt;/td&gt;
      &lt;td&gt;2.971567&lt;/td&gt;
      &lt;td&gt;2.827994&lt;/td&gt;
      &lt;td&gt;3.644444&lt;/td&gt;
      &lt;td&gt;3.153846&lt;/td&gt;
      &lt;td&gt;3.122679&lt;/td&gt;
      &lt;td&gt;Premium Economy&lt;/td&gt;
      &lt;td&gt;1510&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;2.987079&lt;/td&gt;
      &lt;td&gt;2.986317&lt;/td&gt;
      &lt;td&gt;3.207894&lt;/td&gt;
      &lt;td&gt;2.646467&lt;/td&gt;
      &lt;td&gt;2.222536&lt;/td&gt;
      &lt;td&gt;2.573143&lt;/td&gt;
      &lt;td&gt;2.066820&lt;/td&gt;
      &lt;td&gt;3.099697&lt;/td&gt;
      &lt;td&gt;Economy&lt;/td&gt;
      &lt;td&gt;29784&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;3.325650&lt;/td&gt;
      &lt;td&gt;3.740325&lt;/td&gt;
      &lt;td&gt;3.771536&lt;/td&gt;
      &lt;td&gt;3.357233&lt;/td&gt;
      &lt;td&gt;3.002574&lt;/td&gt;
      &lt;td&gt;3.276316&lt;/td&gt;
      &lt;td&gt;3.285714&lt;/td&gt;
      &lt;td&gt;3.340547&lt;/td&gt;
      &lt;td&gt;First Class&lt;/td&gt;
      &lt;td&gt;879&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;3.437469&lt;/td&gt;
      &lt;td&gt;3.616658&lt;/td&gt;
      &lt;td&gt;3.873538&lt;/td&gt;
      &lt;td&gt;3.559762&lt;/td&gt;
      &lt;td&gt;3.046943&lt;/td&gt;
      &lt;td&gt;3.375000&lt;/td&gt;
      &lt;td&gt;2.726190&lt;/td&gt;
      &lt;td&gt;3.556118&lt;/td&gt;
      &lt;td&gt;Business Class&lt;/td&gt;
      &lt;td&gt;6347&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The last thing we're going to do for now is to compare ratings between passengers who end up recommending the airline to friends vs. those who do not:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [35]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"SELECT avg(overall_rating)/2 AS ovr, avg(seat_comfort_rating) AS seat, avg(cabin_staff_rating) AS cstaff,&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;avg(food_beverages_rating) AS food, avg(inflight_entertainment_rating) AS inflight, avg(ground_service_rating) AS gstaff,&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;avg(wifi_connectivity_rating) AS wifi, avg(value_money_rating) AS value, cabin_flown, count(*), recommended &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;FROM airline GROUP BY (cabin_flown, recommended) ORDER BY recommended, cabin_flown;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [36]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;cabin_recommend_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;column_names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [37]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;cabin_recommend_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cabin_recommend_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cabin_recommend_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;column_names&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The data below suggest a high degree of polarization. One might imagine that people have an implicit "threshold" value that, once crossed, results in a recommendation. Instead, what we find, perhaps unsurprisingly, is that flights that are not recommended are rated a lot worse than those that are recommended.&lt;/p&gt;
&lt;p&gt;This is consistent with, but not exclusively because of, a process whereby people judge their flights as "good" or "bad", and then use the rating system to express their satisfaction/disatisfaction with each of the criteria.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [38]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython2"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;cabin_recommend_data&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[38]:&lt;/div&gt;

&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;ovr&lt;/th&gt;
      &lt;th&gt;seat&lt;/th&gt;
      &lt;th&gt;cstaff&lt;/th&gt;
      &lt;th&gt;food&lt;/th&gt;
      &lt;th&gt;inflight&lt;/th&gt;
      &lt;th&gt;gstaff&lt;/th&gt;
      &lt;th&gt;wifi&lt;/th&gt;
      &lt;th&gt;value&lt;/th&gt;
      &lt;th&gt;cabin_flown&lt;/th&gt;
      &lt;th&gt;count&lt;/th&gt;
      &lt;th&gt;recommended&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;1.542186&lt;/td&gt;
      &lt;td&gt;2.379014&lt;/td&gt;
      &lt;td&gt;2.442661&lt;/td&gt;
      &lt;td&gt;2.227797&lt;/td&gt;
      &lt;td&gt;2.062937&lt;/td&gt;
      &lt;td&gt;2.086538&lt;/td&gt;
      &lt;td&gt;1.433333&lt;/td&gt;
      &lt;td&gt;1.934594&lt;/td&gt;
      &lt;td&gt;Business Class&lt;/td&gt;
      &lt;td&gt;1978&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;1.279593&lt;/td&gt;
      &lt;td&gt;2.059694&lt;/td&gt;
      &lt;td&gt;2.062266&lt;/td&gt;
      &lt;td&gt;1.728103&lt;/td&gt;
      &lt;td&gt;1.556541&lt;/td&gt;
      &lt;td&gt;1.567488&lt;/td&gt;
      &lt;td&gt;1.384354&lt;/td&gt;
      &lt;td&gt;1.822827&lt;/td&gt;
      &lt;td&gt;Economy&lt;/td&gt;
      &lt;td&gt;13988&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;1.392473&lt;/td&gt;
      &lt;td&gt;2.623693&lt;/td&gt;
      &lt;td&gt;2.358885&lt;/td&gt;
      &lt;td&gt;2.003546&lt;/td&gt;
      &lt;td&gt;1.942029&lt;/td&gt;
      &lt;td&gt;1.655172&lt;/td&gt;
      &lt;td&gt;1.500000&lt;/td&gt;
      &lt;td&gt;1.723473&lt;/td&gt;
      &lt;td&gt;First Class&lt;/td&gt;
      &lt;td&gt;312&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;1.249601&lt;/td&gt;
      &lt;td&gt;2.044709&lt;/td&gt;
      &lt;td&gt;2.166915&lt;/td&gt;
      &lt;td&gt;1.862891&lt;/td&gt;
      &lt;td&gt;1.854790&lt;/td&gt;
      &lt;td&gt;2.250000&lt;/td&gt;
      &lt;td&gt;2.000000&lt;/td&gt;
      &lt;td&gt;1.715318&lt;/td&gt;
      &lt;td&gt;Premium Economy&lt;/td&gt;
      &lt;td&gt;692&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;1.364362&lt;/td&gt;
      &lt;td&gt;1.574697&lt;/td&gt;
      &lt;td&gt;1.641992&lt;/td&gt;
      &lt;td&gt;1.266938&lt;/td&gt;
      &lt;td&gt;1.165536&lt;/td&gt;
      &lt;td&gt;2.000000&lt;/td&gt;
      &lt;td&gt;1.600000&lt;/td&gt;
      &lt;td&gt;1.441138&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;2328&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt;4.203916&lt;/td&gt;
      &lt;td&gt;4.182438&lt;/td&gt;
      &lt;td&gt;4.527654&lt;/td&gt;
      &lt;td&gt;4.165486&lt;/td&gt;
      &lt;td&gt;3.493651&lt;/td&gt;
      &lt;td&gt;3.995370&lt;/td&gt;
      &lt;td&gt;3.444444&lt;/td&gt;
      &lt;td&gt;4.282444&lt;/td&gt;
      &lt;td&gt;Business Class&lt;/td&gt;
      &lt;td&gt;4369&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6&lt;/th&gt;
      &lt;td&gt;4.140086&lt;/td&gt;
      &lt;td&gt;3.860673&lt;/td&gt;
      &lt;td&gt;4.288908&lt;/td&gt;
      &lt;td&gt;3.497350&lt;/td&gt;
      &lt;td&gt;2.851571&lt;/td&gt;
      &lt;td&gt;3.961905&lt;/td&gt;
      &lt;td&gt;3.500000&lt;/td&gt;
      &lt;td&gt;4.223123&lt;/td&gt;
      &lt;td&gt;Economy&lt;/td&gt;
      &lt;td&gt;15796&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;7&lt;/th&gt;
      &lt;td&gt;4.276896&lt;/td&gt;
      &lt;td&gt;4.363813&lt;/td&gt;
      &lt;td&gt;4.560311&lt;/td&gt;
      &lt;td&gt;4.101365&lt;/td&gt;
      &lt;td&gt;3.586826&lt;/td&gt;
      &lt;td&gt;4.276596&lt;/td&gt;
      &lt;td&gt;4.000000&lt;/td&gt;
      &lt;td&gt;4.227513&lt;/td&gt;
      &lt;td&gt;First Class&lt;/td&gt;
      &lt;td&gt;567&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;8&lt;/th&gt;
      &lt;td&gt;4.215159&lt;/td&gt;
      &lt;td&gt;4.112840&lt;/td&gt;
      &lt;td&gt;4.485084&lt;/td&gt;
      &lt;td&gt;3.936446&lt;/td&gt;
      &lt;td&gt;3.674479&lt;/td&gt;
      &lt;td&gt;4.151515&lt;/td&gt;
      &lt;td&gt;3.875000&lt;/td&gt;
      &lt;td&gt;4.316176&lt;/td&gt;
      &lt;td&gt;Premium Economy&lt;/td&gt;
      &lt;td&gt;818&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;9&lt;/th&gt;
      &lt;td&gt;4.339286&lt;/td&gt;
      &lt;td&gt;3.904145&lt;/td&gt;
      &lt;td&gt;4.445596&lt;/td&gt;
      &lt;td&gt;3.220779&lt;/td&gt;
      &lt;td&gt;2.369792&lt;/td&gt;
      &lt;td&gt;5.000000&lt;/td&gt;
      &lt;td&gt;4.000000&lt;/td&gt;
      &lt;td&gt;4.390511&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;548&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><category>skytrax</category><guid>https://bryansim.github.io/posts/skytrax-data-1/</guid><pubDate>Tue, 03 May 2016 02:03:36 GMT</pubDate></item></channel></rss>